import{u as w}from"./D5VnKav6.js";import{n as c,q as m,C,D as E,_ as S,o as A,c as x,E as U,a as s,j as b,v as k,g as T}from"./ClYIXCJx.js";const V={name:"AudioElement",props:{src:{type:String,required:!0},title:{type:String,default:"Unknown"},tooltipTitle:{type:String,default:"Change the volume by click, scroll or touch.",required:!1}},emits:["update:volume","update:loaded","update:playing","update:canplay"],setup(o,{emit:a}){const d=w(),e=c(null),n=c(1),u=()=>{if(e.value instanceof HTMLAudioElement){const l=e.value;l.muted=!0}},t=()=>{try{e.value instanceof HTMLAudioElement&&e.value?.play()}catch{}},r=()=>{e.value?.pause()},p=()=>d.playing,v=()=>{e.value&&(d.playing?e.value.play():e.value.pause())};m(()=>d.playing,l=>{l?t():(u(),r())}),m(()=>n.value,l=>{e.value&&a("update:volume",l)});const y=l=>{if(l.deltaY<0){const i=Math.min(1,n.value+.02);n.value=i}else{const i=Math.max(0,n.value-.02);n.value=i}},g=()=>{try{const l=window.location.origin+"/images/scenery/"+o.title.toLowerCase()+".jpg";e.value&&(e.value.controls=!0,navigator.mediaSession.metadata=new MediaMetadata({title:o.title,artist:"Mindboost",album:"Mindboost Originale",artwork:[{src:l,sizes:"192x192",type:"image/jpeg"}]}))}catch{}},f=()=>{a("update:playing",!0)},h=()=>{a("update:canplay",!0)},M=()=>{a("update:playing",!1)},P=()=>{o.title!=="Noise"&&g()};return C(()=>{e.value&&(e.value.src=o.src)}),E(()=>{e.value=null,n.value=0}),{audioElement:e,play:t,pause:r,isPlaying:p,handlePlay:f,handlePause:M,handleUpdatedMetadata:P,handleCanPlay:h,volume:n,togglePlayPause:v,changeVolumeOnWheel:y}}},L={class:"slider"},O=["title"];function W(o,a,d,e,n,u){return A(),x("div",null,[U(o.$slots,"default",{},void 0,!0),s("div",L,[b(s("input",{id:"gain-control","onUpdate:modelValue":a[0]||(a[0]=t=>e.volume=t),type:"range",min:"0",max:"1",step:"0.02","data-toggle":"tooltip","data-placement":"top",title:d.tooltipTitle,onWheel:a[1]||(a[1]=T((...t)=>e.changeVolumeOnWheel&&e.changeVolumeOnWheel(...t),["prevent"]))},null,40,O),[[k,e.volume]])]),s("audio",{ref:"audioElement",hidden:"",muted:"",loop:"",onPlay:a[2]||(a[2]=(...t)=>e.handlePlay&&e.handlePlay(...t)),onPause:a[3]||(a[3]=(...t)=>e.handlePause&&e.handlePause(...t)),onLoadedmetadata:a[4]||(a[4]=(...t)=>e.handleUpdatedMetadata&&e.handleUpdatedMetadata(...t)),onCanplay:a[5]||(a[5]=(...t)=>e.handleCanPlay&&e.handleCanPlay(...t))},null,544)])}const Y=S(V,[["render",W],["__scopeId","data-v-db6393f0"]]);export{Y as A};
