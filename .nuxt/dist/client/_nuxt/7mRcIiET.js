import{k as b,n as p,o as n,c,a as t,F as l,a5 as S,a8 as _,t as s,d as i,a3 as k}from"./ClYIXCJx.js";const v={class:"row justify-content-center mt-5"},w={class:"col-12 col-sm-8"},C={class:"table table-bordered"},x=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"Subscription Name"),t("th",{scope:"col"},"Duration"),t("th",{scope:"col"},"Payment Method"),t("th",{scope:"col"},"Payment Type"),t("th",{scope:"col"},"Subscription Qty"),t("th",{scope:"col"},"Price"),t("th",{scope:"col"},"Status"),t("th",{scope:"col"},"Purchase Date"),t("th",{scope:"col"},"Expiry Date"),t("th",{scope:"col"},"Action")])],-1),D={scope:"row"},j=t("i",{class:"fas fa-credit-card"},null,-1),B=t("i",{class:"fas fa-university"},null,-1),E=["onClick"],L={__name:"subscription",setup(P){const d=b(),r=p([]);async function h(){try{const a=await _.post("https://mindbostapi.dowhf.com/api/user-active-subscriptions",{email:d.user.email});r.value=a.data.data,console.log("Fetched subscriptions:",a)}catch(a){console.error("Error fetching subscriptions:",a)}}function u(a){const o={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(a).toLocaleDateString(void 0,o)}h(),p("sub_01j4yk5j02xwfwnsjqjgpk4npg");async function m(a){try{const o=await _.post("https://mindbostapi.dowhf.com/api/cancel-subscriptions",{email:d.user.email,subscription_id:a});r.value=o.data.data,Swal.fire({title:"Subscription Cancel!",text:"Your Subscriptionis is Canceled.",icon:"success"})}catch(o){console.error("Error to cancel subscriptions:",o)}}function y(a){return a===1?"Active":"Cancelled"}function f(a){return a=="0"?"badge bg-warning":"badge bg-success"}return(a,o)=>(n(),c("div",null,[t("div",v,[t("div",w,[t("table",C,[x,t("tbody",null,[(n(!0),c(l,null,S(r.value,(e,g)=>(n(),c("tr",{key:e.id},[t("th",D,s(g+1),1),t("td",null,s(e.product_name),1),t("td",null,s(e.product_billing_frequency)+" "+s(e.product_billing_interval),1),e.payment_method==="card"?(n(),c(l,{key:0},[j,i(" Card ")],64)):e.payment_method==="bank"?(n(),c(l,{key:1},[B,i(" Bank ")],64)):(n(),c(l,{key:2},[i(s(e.payment_method),1)],64)),t("td",null,s(e.payment_type),1),t("td",null,s(e.product_quantity),1),t("td",null,"$"+s(e.product_price),1),t("td",null,[t("span",{class:k(f(e.status))},s(y(e.status)),3)]),t("td",null,s(u(e.purchasing_date)),1),t("td",null,s(u(e.expiry_date)),1),t("td",null,[t("button",{class:"btn btn-danger",onClick:q=>m(e.id)},"Cancel",8,E)])]))),128))])])])])]))}};export{L as default};
