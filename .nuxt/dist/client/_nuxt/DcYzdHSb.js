import{_ as g,u as p,f as v,ab as w,m as b,i as k,o as l,c as i,a as s,d as _,t as r,g as y,j as d,v as m,h as c,a9 as x,I as U,k as f}from"./ClYIXCJx.js";const L={name:"EditAccount",components:{},setup(){const{t:a}=p(),o=v(),u=w();return{t:a,localePath:o,changeLanguage:e=>{console.log("switch",e),U().push(u(e))}}},data(){return{loading:!1,form:{first_name:"",surname:"",email:"email",password:"",language:"en"},errors:[]}},computed:{...b(f,["user"])},mounted(){this.form.first_name=this.user.first_name,this.form.email=this.user.email,this.form.surname=this.user.surname,this.form.language=this.user.language},methods:{...k(f,["updateUser"]),saveUser(){this.loading=!0,console.log("LANGUNGAUNGUNGANG "+this.form.language),this.$axios.post("/api/account/update",this.form).then(({data:a})=>{this.changeLanguage(this.form.language),this.loading=!1,a.success&&(this.$toast.success(a.message),this.updateUser(a.user))}).catch(a=>{this.loading=!1,this.$toast.error("Something wrong while saving..."),a.response.status===422&&(this.errors=a.response.data.errors)})}}},N={class:"row justify-content-center"},S={class:"col-12 col-md-10 col-sm-8"},V={class:"fw-bold text-center pt-5 me-5"},A=s("i",{class:"fa-solid fa-arrow-left-long"},null,-1),E=[A],G={class:"row justify-content-center"},P={class:"col-11 col-md-8"},C={class:"row pt-5"},j={class:"col-12"},B={class:"text-muted"},M={key:0,class:"invalid-feedback d-block"},D={class:"row pt-3"},F={class:"col-12"},I={class:"text-muted"},T={key:0,class:"invalid-feedback d-block"},R={class:"row pt-3"},q={class:"col-12"},z={class:"text-muted"},H={key:0,class:"invalid-feedback d-block"},J={class:"row pt-3"},K={class:"col-12"},O={class:"text-muted"},Q={key:0,class:"invalid-feedback d-block"},W={class:"row pt-3"},X={class:"col-12"},Y={class:"text-muted"},Z=s("option",{value:"en"}," English ",-1),$=s("option",{value:"de"}," German ",-1),ss=[Z,$],es={key:0,class:"invalid-feedback d-block"},os={class:"row pt-5"},ts={class:"col-12 text-center"},rs={type:"submit",class:"btn text-white fs-5 col-12 fw-bold py-2",style:{"background-color":"#e9c046"}},ns={key:0,class:"spinner-border spinner-border-sm",role:"status"},as={class:"sr-only"};function ls(a,o,u,n,e,h){return l(),i("div",null,[s("div",N,[s("div",S,[s("h4",V,[s("span",{class:"float-start",style:{cursor:"pointer"},onClick:o[0]||(o[0]=t=>a.$router.go(-1))},E),_(" "+r(n.t("Edit Account")),1)]),s("div",G,[s("div",P,[s("form",{onSubmit:o[7]||(o[7]=y((...t)=>h.saveUser&&h.saveUser(...t),["prevent"]))},[s("div",C,[s("div",j,[s("label",B,r(n.t("First Name")),1),d(s("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>e.form.first_name=t),type:"text",class:"form-control",placeholder:"First Name"},null,512),[[m,e.form.first_name]]),e.errors.first_name?(l(),i("div",M,r(e.errors.first_name[0]),1)):c("",!0)])]),s("div",D,[s("div",F,[s("label",I,r(n.t("Surname")),1),d(s("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>e.form.surname=t),type:"text",class:"form-control",placeholder:"Surname"},null,512),[[m,e.form.surname]]),e.errors.surname?(l(),i("div",T,r(e.errors.surname[0]),1)):c("",!0)])]),s("div",R,[s("div",q,[s("label",z,r(n.t("Email")),1),d(s("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>e.form.email=t),type:"email",class:"form-control",placeholder:"Email"},null,512),[[m,e.form.email]]),e.errors.email?(l(),i("div",H,r(e.errors.email[0]),1)):c("",!0)])]),s("div",J,[s("div",K,[s("label",O,r(n.t("Password")),1),d(s("input",{"onUpdate:modelValue":o[4]||(o[4]=t=>e.form.password=t),type:"password",class:"form-control",placeholder:"Password"},null,512),[[m,e.form.password]]),e.errors.password?(l(),i("div",Q,r(e.errors.password[0]),1)):c("",!0)])]),s("div",W,[s("div",X,[s("label",Y,r(n.t("Language")),1),d(s("select",{"onUpdate:modelValue":o[5]||(o[5]=t=>e.form.language=t),class:"form-select",onChange:o[6]||(o[6]=(...t)=>n.changeLanguage&&n.changeLanguage(...t))},ss,544),[[x,e.form.language]]),e.errors.language?(l(),i("div",es,r(e.errors.language[0]),1)):c("",!0)])]),s("div",os,[s("div",ts,[s("button",rs,[_(r(n.t("Save Changes"))+" ",1),e.loading?(l(),i("div",ns,[s("span",as,r(n.t("Loading...")),1)])):c("",!0)])])])],32)])])])])])}const cs=g(L,[["render",ls]]);export{cs as default};
