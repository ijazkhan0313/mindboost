import{k as w,n as h,o as n,c,a as t,j as S,v as k,F as i,a5 as C,a8 as u,t as o,d as p,a3 as x}from"./ClYIXCJx.js";const D={class:"row justify-content-center mt-5"},E={class:"col-12 my-4 col-sm-8"},P={class:"row g-3"},B={class:"col-md-9"},U=t("label",{for:"inputPassword2",class:"visually-hidden"},"Email address",-1),j={class:"col-12 col-sm-8"},q={class:"table table-bordered"},F=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"Subscription Name"),t("th",{scope:"col"},"Duration"),t("th",{scope:"col"},"Payment Method"),t("th",{scope:"col"},"Payment Type"),t("th",{scope:"col"},"Subscription Qty"),t("th",{scope:"col"},"Price"),t("th",{scope:"col"},"Status"),t("th",{scope:"col"},"Purchase Date"),t("th",{scope:"col"},"Expiry Date"),t("th",{scope:"col"},"Action")])],-1),I={scope:"row"},L=t("i",{class:"fas fa-credit-card"},null,-1),N=t("i",{class:"fas fa-university"},null,-1),T=["onClick"],$={__name:"subscription",setup(V){const r=w(),d=h([]);async function _(){try{const e=await u.post("https://mindbostapi.dowhf.com/api/user-active-subscriptions",{email:r.user.email});d.value=e.data.data,console.log("Fetched subscriptions:",e)}catch(e){console.error("Error fetching subscriptions:",e)}}function m(e){const a={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(e).toLocaleDateString(void 0,a)}function y(e){return e===1?"Active":"Cancelled"}function f(e){return e=="0"?"badge bg-warning":"badge bg-success"}_();const l=h("");async function v(){if(!l.value){console.error("Email is required");return}try{const e=await u.post("https://mindbostapi.dowhf.com/api/invitations/send",{email:l.value,inviter_id:r.user.id});console.log("Invitation sent:",e.data),Swal.fire({title:"Good job!",text:"Inviateion email is sent successfully",icon:"success"})}catch(e){console.error("Error sending invitation:",e)}}async function b(e){try{const a=await u.post("https://mindbostapi.dowhf.com/api/cancel-subscriptions",{email:r.user.email,subscription_id:e});d.value=a.data.data,Swal.fire({title:"Subscription Cancel!",text:"Your Subscriptionis is Canceled.",icon:"success"})}catch(a){console.error("Error to cancel subscriptions:",a)}}return(e,a)=>(n(),c("div",null,[t("div",D,[t("div",E,[t("div",P,[t("div",B,[U,S(t("input",{type:"text",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=s=>l.value=s),name:"email",placeholder:"Enter email","aria-describedby":"emailHelp"},null,512),[[k,l.value]])]),t("div",{class:"col-md-2"},[t("button",{onClick:v,class:"btn btn-primary"},"Invite User")])])]),t("div",j,[t("table",q,[F,t("tbody",null,[(n(!0),c(i,null,C(d.value,(s,g)=>(n(),c("tr",{key:s.id},[t("th",I,o(g+1),1),t("td",null,o(s.product_name),1),t("td",null,o(s.product_billing_frequency)+" "+o(s.product_billing_interval),1),s.payment_method==="card"?(n(),c(i,{key:0},[L,p(" Card ")],64)):s.payment_method==="bank"?(n(),c(i,{key:1},[N,p(" Bank ")],64)):(n(),c(i,{key:2},[p(o(s.payment_method),1)],64)),t("td",null,o(s.payment_type),1),t("td",null,o(s.product_quantity),1),t("td",null,"$"+o(s.product_price),1),t("td",null,[t("span",{class:x(f(s.status))},o(y(s.status)),3)]),t("td",null,o(m(s.purchasing_date)),1),t("td",null,o(m(s.expiry_date)),1),t("td",null,[t("button",{class:"btn btn-danger",onClick:A=>b(s.id)},"Cancel",8,T)])]))),128))])])])])]))}};export{$ as default};
